<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f = "http://java.sun.com/jsf/core"
xmlns:h = "http://java.sun.com/jsf/html"
xmlns:rich = "http://richfaces.org/rich"
xmlns:a4j = "http://richfaces.org/a4j"
xmlns:c="http://java.sun.com/jstl/core"
xmlns:fn="http://java.sun.com/jsp/jstl/functions"
template="/templates/template.xhtml">

<!-- -->
<!-- auto generated jsf file -->
<!-- write modifications between specific code marks -->
<!-- processed by skeleton generator -->
<!-- -->

<ui:define name="content">

<h:form id="regionListForm">
<a4j:jsFunction name="load"
action="#{regionListController.load}"
render="regionPanelGroup"
oncomplete="$('#processingPanel').modal('hide')"/>
<script>window.onload = function(){$('#processingPanel').modal('show');load();}</script>
<h2>
#{i18n.regionList}
</h2>
<h:panelGroup id="regionPanelGroup">
<a4j:region>

<ui:fragment rendered="#{empty regionListView.regionList}">
#{i18n.noDataFound}<br/>
</ui:fragment>

<ui:fragment rendered="#{not empty regionListView.regionList}">
<div style="overflow-x:scroll">

<rich:dataTable rows="10"
id="regionList" var="region" name="datatable"
value="#{regionListView.regionList}" rowClasses="datatableRow, datatableRowLight">

<f:facet name="header">
<rich:columnGroup>
<rich:column>
<div id="dropList" class="dropList">
<a4j:commandLink title="#{i18n.deleteSelection}" action="#{regionListController.deleteList}"
onclick="if (!confirm('#{i18n.confirmDeleteSelection}')) return false" execute="@region" render="regionPanelGroup">
<span class="glyphicon glyphicon-trash"/>
</a4j:commandLink>
</div>
</rich:column>

<rich:column>
<a4j:commandLink action="#{regionListController.resetRegionFilter}" render="regionList, regionScroller">
<h:graphicImage url="/resources/images/icons/refresh.png" styleClass="imageIcon" title="#{i18n.resetFilter}"/>
</a4j:commandLink>
</rich:column>

<rich:column>
<h:inputText id="regionCountryCodeFilter"
value="#{regionListView.regionFilter.countryCode}"
styleClass="dataTableFilter">
<a4j:ajax event="keyup" render="regionList, regionScroller"
oncomplete="setCaretToEnd(event);" >
<a4j:attachQueue requestDelay="500" />
</a4j:ajax>
</h:inputText>
</rich:column>

<rich:column>
<h:inputText id="regionCodeFilter"
value="#{regionListView.regionFilter.code}"
styleClass="dataTableFilter">
<a4j:ajax event="keyup" render="regionList, regionScroller"
oncomplete="setCaretToEnd(event);" >
<a4j:attachQueue requestDelay="500" />
</a4j:ajax>
</h:inputText>
</rich:column>

<rich:column>
<h:inputText id="regionLabelFilter"
value="#{regionListView.regionFilter.label}"
styleClass="dataTableFilter">
<a4j:ajax event="keyup" render="regionList, regionScroller"
oncomplete="setCaretToEnd(event);" >
<a4j:attachQueue requestDelay="500" />
</a4j:ajax>
</h:inputText>
</rich:column>

</rich:columnGroup>
</f:facet>
<rich:column>
<f:facet name="header">
<h:selectBooleanCheckbox id="selectUnselectAll" onclick="selectUnselectAll(this)" value="false"/>
<script>$(function(){displaySelectUnselectAll();});</script>
</f:facet>
<h:selectBooleanCheckbox rendered="#{region.canDelete}" id="selectUnselect" value="#{region.selected}" onclick="selectUnselect('regionListForm:regionList:selectUnselectAll')"/>
</rich:column>

<rich:column>
<f:facet name="header">
<h:outputText value="Actions" />
</f:facet>
<h:panelGrid columns="2">
<h:link outcome="/sections/localization/region/RegionDetails.jsf">
<h:graphicImage url="/resources/images/icons/edit.png" styleClass="imageIcon" title="#{i18n.edit}"/>
<f:param name="id" value="#{region.id}" />
</h:link>
<a4j:commandLink rendered="#{region.canDelete}" action="#{regionListController.delete(region.id)}"
onclick="if (!confirm('#{i18n.confirmDelete}')) return false" render="regionPanelGroup">
<h:graphicImage url="/resources/images/icons/delete.png" styleClass="imageIcon" title="#{i18n.delete}"/>
</a4j:commandLink>
</h:panelGrid>
</rich:column>

<rich:column sortBy="#{region.countryCode}"
filterType="custom" filterExpression="#{fn:containsIgnoreCase(region.countryCode, regionListView.regionFilter.countryCode)}">
<f:facet name="header">
<h:outputText value="#{i18n.regionCountryCode}" />
</f:facet>
<h:outputText value="#{region.countryCode}"/>
</rich:column>

<rich:column sortBy="#{region.code}"
filterType="custom" filterExpression="#{fn:containsIgnoreCase(region.code, regionListView.regionFilter.code)}">
<f:facet name="header">
<h:outputText value="#{i18n.regionCode}" />
</f:facet>
<h:outputText value="#{region.code}"/>
</rich:column>

<rich:column sortBy="#{region.label}"
filterType="custom" filterExpression="#{fn:containsIgnoreCase(region.label, regionListView.regionFilter.label)}">
<f:facet name="header">
<h:outputText value="#{i18n.regionLabel}" />
</f:facet>
<h:outputText value="#{region.label}"/>
</rich:column>

</rich:dataTable>

</div>

<div class="scroller">
<rich:dataScroller id="regionScroller" maxPages="5" renderIfSinglePage="false" for="regionList"/>
</div>

</ui:fragment>

<a4j:commandButton value="#{i18n.create}" action="#{regionListController.createRegion}" styleClass="btn btn-info" oncomplete="if (#{empty facesContext.maximumSeverity or facesContext.maximumSeverity.ordinal ==0}) {$('#regionModal').modal('show')}" render="regionDetailPanelGroup"/>

<!-- Specific Code Start -->
<!-- Specific Code End -->
</a4j:region>

</h:panelGroup>

<div class="modal modal-default" id="regionModal" tabindex="-1" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<ui:include src="/sections/localization/region/RegionModal.xhtml"/>
</div>
</div>
</div>
</h:form>
</ui:define>
</ui:composition>
